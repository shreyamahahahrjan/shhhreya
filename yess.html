<!DOCTYPE html>
<html>
<head>
    <style>
        body {
            margin: 0;
            background: white;
            height: 100vh;
            font-family: 'Poppins', sans-serif;
            display: flex;
            flex-direction: column;
            color: black;
        }

        #navbar {
            height: 65px;
            display: flex;
            align-items: center;
            padding: 0 20px;
            background: #2e2e2e;
        }

        #left {
            flex: 1;
            font-size: 22px;
            font-weight: bold;
            color: #6ab1ff;
            letter-spacing: 1px;
        }

        .navBtn {
            width: 55px;
            height: 55px;
            border-radius: 50%;
            background: #444;
            color: #ff8ad4;
            border: 2px solid #ff8ad4;
            cursor: pointer;
            font-size: 12px;
            font-weight: 600;
            transition: 0.25s ease;
            display: flex;
            justify-content: center;
            align-items: center;
            margin-left: 15px;
            text-decoration: none;
        }

        .navBtn:hover {
            background: #ff8ad4;
            color: black;
            transform: scale(1.15);
            box-shadow: 0 0 12px #ff8ad4;
        }

        #toolbar {
            display: flex;
            gap: 12px;
            padding: 12px;
            background: #e3e3e3;
            justify-content: center;
            align-items: center;
        }

        .color {
            width: 35px;
            height: 35px;
            border-radius: 50%;
            cursor: pointer;
            border: 3px solid black;
            transition: 0.25s ease;
            box-shadow: 0 0 6px gray;
        }

        .color:hover {
            transform: scale(1.2);
            box-shadow: 0 0 15px black;
        }

        #eraser {
            width: 35px;
            height: 35px;
            border-radius: 50%;
            cursor: pointer;
            border: 3px solid #ff57c6;
            background: #ff9de6;
            position: relative;
            transition: 0.25s;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        #eraser:hover {
            transform: scale(1.2);
            box-shadow: 0 0 15px #ff57c6;
        }

        #eraser::before {
            content: "";
            width: 18px;
            height: 10px;
            background: white;
            border-radius: 3px;
            transform: rotate(-25deg);
            position: absolute;
        }

        #clear {
            padding: 8px 15px;
            font-size: 15px;
            cursor: pointer;
            border-radius: 8px;
            border: 2px solid black;
            background: white;
            transition: 0.25s;
        }

        #clear:hover {
            background: black;
            color: white;
        }

        #grid {
            flex: 1;
            display: grid;
            grid-template-columns: repeat(auto-fill, 20px);
            grid-auto-rows: 20px;
        }

        .cell {
            background: white;
            border: 1px solid #eee;
        }

        #saveBtn {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: #4ab8ff;
            color: white;
            padding: 15px 22px;
            border-radius: 50px;
            font-size: 18px;
            font-weight: 700;
            cursor: pointer;
            border: none;
            box-shadow: 0 0 15px #4ab8ff;
            transition: 0.25s ease;
        }

        #saveBtn:hover {
            transform: scale(1.12);
            box-shadow: 0 0 30px #4ab8ff;
        }
    </style>
</head>

<body>

    <div id="navbar">
        <div id="left">PIXEL ART</div>
    <a  class="navBtn" href="file:///C:/Users/User/Desktop/new.html" > Home</a>
   
    </div>

    <div id="toolbar">
        <div class="color" style="background:red"></div>
        <div class="color" style="background:orange"></div>
        <div class="color" style="background:yellow"></div>
        <div class="color" style="background:green"></div>
        <div class="color" style="background:blue"></div>
        <div class="color" style="background:purple"></div>
        <div class="color" style="background:black"></div>

        <!-- RAINBOW BUTTON -->
        <div class="color" id="rainbow" style="background: linear-gradient(45deg, red, orange, yellow, green, blue, purple);"></div>

        <div id="eraser"></div>

        <button id="clear">Clear</button>
    </div>

    <div id="grid"></div>

    <button id="saveBtn">SAVE</button>

<script>
    var currentColor = "black"
    var rainbowMode = false
    var isDrawing = false

    function randomColor() {
        return "#" + Math.floor(Math.random()*16777215).toString(16)
    }

    var colors = document.querySelectorAll(".color")
    colors.forEach(function(c){
        c.onclick = function(){

            if (this.id === "rainbow") {
                rainbowMode = true
                return
            }

            rainbowMode = false
            currentColor = this.style.background
        }
    })

    document.getElementById("eraser").onclick = function(){
        rainbowMode = false
        currentColor = "white"
    }

    document.getElementById("clear").onclick = function(){
        document.querySelectorAll(".cell").forEach(function(cell){
            cell.style.background = "white"
        })
    }

    var grid = document.getElementById("grid")
    var total = Math.floor((innerWidth * (innerHeight - 150)) / (20 * 20))

    for(let i = 0; i < total; i++){
        let cell = document.createElement("div")
        cell.className = "cell"

        cell.onmousedown = function(){
            isDrawing = true
            this.style.background = rainbowMode ? randomColor() : currentColor
        }

        cell.onmouseover = function(){
            if(isDrawing)
                this.style.background = rainbowMode ? randomColor() : currentColor
        }

        grid.appendChild(cell)
    }

    document.onmouseup = function(){
        isDrawing = false
    }

    document.getElementById("saveBtn").onclick = function(){
        let canvas = document.createElement("canvas")
        let ctx = canvas.getContext("2d")

        let cols = Math.floor(innerWidth / 20)
        let rows = Math.floor((innerHeight - 150) / 20)

        canvas.width = cols * 20
        canvas.height = rows * 20

        let cells = document.querySelectorAll(".cell")

        let index = 0
        for(let r=0; r<rows; r++){
            for(let c=0; c<cols; c++){
                ctx.fillStyle = cells[index].style.background || "white"
                ctx.fillRect(c*20, r*20, 20, 20)
                index++
            }
        }

        let link = document.createElement("a")
        link.download = "pixel_art.png"
        link.href = canvas.toDataURL()
        link.click()
    }
</script>

</body>
</html>
